{% extends "base.html" %}

{% block content %}
<div class="container">
    <div class="content-container">
        <div class="page-header">
            <h1><i class="fas fa-chart-bar"></i> 基本圖表分析</h1>
            <p>使用長條圖、圓餅圖、折線圖深入分析攻擊資料</p>
        </div>

        <!-- Bar Chart: Industry Analysis -->
        <div class="chart-container">
            <h3 class="chart-title">
                <i class="fas fa-chart-bar"></i> 產業類型攻擊分析
            </h3>
            <div class="alert alert-info">
                <i class="fas fa-info-circle"></i>
                <strong>圖表說明：</strong>橫向長條圖顯示各產業類型的網路攻擊情況，
                可切換檢視攻擊次數或財務損失，幫助分析不同產業面臨的威脅程度。
            </div>

            <!-- Toggle buttons -->
            <div class="mb-3 text-center">
                <div class="btn-group" role="group" aria-label="Chart type toggle">
                    <button type="button" class="btn btn-primary active" id="attack-count-btn"
                        onclick="switchIndustryChart('count')">
                        <i class="fas fa-hashtag"></i> 攻擊次數
                    </button>
                    <button type="button" class="btn btn-outline-primary" id="financial-loss-btn"
                        onclick="switchIndustryChart('loss')">
                        <i class="fas fa-dollar-sign"></i> 財務損失
                    </button>
                </div>
            </div>

            <div id="industry-chart" class="loading">
                <div class="spinner-border" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>

            <div class="mt-3">
                <h6><i class="fas fa-lightbulb"></i> 觀察重點：</h6>
                <div id="industry-insights">
                    <ul id="count-insights">
                        <li><strong>高風險產業：</strong>金融、IT部門通常是攻擊者的主要目標</li>
                        <li><strong>攻擊分散度：</strong>分析攻擊是否集中在特定產業或均勻分布</li>
                        <li><strong>防禦優先級：</strong>攻擊次數高的產業應優先加強網路安全防護</li>
                        <li><strong>產業特性：</strong>不同產業面臨的攻擊類型和頻率可能存在差異</li>
                    </ul>
                    <ul id="loss-insights" style="display: none;">
                        <li><strong>經濟衝擊：</strong>財務損失反映攻擊對產業的實際經濟影響</li>
                        <li><strong>損失集中度：</strong>少數高價值目標可能造成巨大財務損失</li>
                        <li><strong>風險評估：</strong>結合攻擊頻率與財務損失評估產業風險</li>
                        <li><strong>資源配置：</strong>高財損產業需投入更多資源進行防護</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Pie Chart: Attack Types -->
        <div class="chart-container">
            <h3 class="chart-title">
                <i class="fas fa-chart-pie"></i> 不同攻擊類型佔比分析
            </h3>
            <div class="alert alert-info">
                <i class="fas fa-info-circle"></i>
                <strong>圖表說明：</strong>圓餅圖展示各種攻擊類型（DDoS、Port Scan、SQL Injection 等）的相對比例，
                幫助理解當前網路威脅的主要形式。
            </div>
            <div id="attack-types-chart" class="loading">
                <div class="spinner-border" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
            <div class="mt-3">
                <h6><i class="fas fa-lightbulb"></i> 觀察重點：</h6>
                <ul>
                    <li><strong>主流威脅：</strong>佔比最大的攻擊類型反映當前最普遍的網路威脅手法</li>
                    <li><strong>多樣性：</strong>攻擊類型的多樣化程度顯示威脅環境的複雜性</li>
                    <li><strong>DDoS 攻擊：</strong>分散式阻斷服務攻擊，影響範圍廣</li>
                    <li><strong>Phishing 釣魚攻擊：</strong>透過社交工程誘騙用戶，出現頻率次高</li>
                    <li><strong>Ransomware 勒索軟體：</strong>針對性較強，財務損失往往高</li>
                    <li><strong>SQL Injection：</strong>針對資料庫的攻擊，危害性高</li>
                </ul>
            </div>
        </div>

        <!-- Box Plot: Defense Method vs Resolution Time (替換原本的折線圖位置) -->
        <div class="chart-container">
            <h3 class="chart-title">
                <i class="fas fa-box-open"></i> 防禦方法與事件解決時間比較
            </h3>
            <div class="alert alert-info">
                <i class="fas fa-info-circle"></i>
                <strong>圖表說明：</strong>盒鬚圖展示不同防禦方法對應的事件解決時間分布，
                幫助評估各種防禦策略的效率和一致性。
            </div>
            <div id="defense-resolution-chart" class="loading">
                <div class="spinner-border" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>

            <!-- Statistics Table -->
            <div class="mt-3">
                <h6><i class="fas fa-table"></i> 統計摘要：</h6>
                <div class="table-responsive">
                    <table class="table table-sm table-striped" id="defense-stats-table">
                        <thead class="table-dark">
                            <tr>
                                <th>防禦方法</th>
                                <th>事件數</th>
                                <th>平均時間</th>
                                <th>中位數</th>
                                <th>標準差</th>
                                <th>最短時間</th>
                                <th>最長時間</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="mt-3">
                <h6><i class="fas fa-lightbulb"></i> 觀察重點：</h6>
                <ul>
                    <li><strong>Firewall 效率最佳：</strong>中位數34小時，為所有防禦方法中最快，顯示其快速阻擋威脅的優勢</li>
                    <li><strong>整體表現相近：</strong>五種防禦方法的平均解決時間都在35-37小時區間，差異不大</li>
                    <li><strong>變異性比較：</strong>Antivirus變異性最小（四分位距34小時），VPN次之（34.25小時），表現較穩定</li>
                    <li><strong>Encryption和Firewall變異性最大：</strong>四分位距達38小時，解決時間波動較大</li>
                    <li><strong>數據分布均勻：</strong>所有方法的時間範圍都是1-72小時，顯示各防禦技術在不同情境下的適用性</li>
                    <li><strong>沒有明顯劣勢方法：</strong>各防禦機制都有其效用，選擇應考慮具體威脅類型和環境需求</li>
                </ul>
            </div>
        </div>

        <!-- 圖表優勢說明卡片 -->
        <div class="row">
            <div class="col-md-4 mb-3">
                <div class="card h-100 border-0 shadow">
                    <div class="card-body">
                        <h5 class="card-title">
                            <i class="fas fa-chart-bar" style="color: var(--primary-color);"></i>
                            長條圖的優勢
                        </h5>
                        <ul class="small">
                            <li>直觀比較不同類別數值</li>
                            <li>清楚展示排名順序</li>
                            <li>易於讀取精確數值</li>
                            <li>支援多維度數據切換</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="card h-100 border-0 shadow">
                    <div class="card-body">
                        <h5 class="card-title">
                            <i class="fas fa-chart-pie" style="color: var(--warning-color);"></i>
                            圓餅圖的優勢
                        </h5>
                        <ul class="small">
                            <li>顯示各部分佔整體比例</li>
                            <li>視覺化比重分配</li>
                            <li>快速識別主要類別</li>
                            <li>適合展示分類數據</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="card h-100 border-0 shadow">
                    <div class="card-body">
                        <h5 class="card-title">
                            <i class="fas fa-box-open" style="color: var(--danger-color);"></i>
                            盒鬚圖的優勢
                        </h5>
                        <ul class="small">
                            <li>一目了然的五數摘要（最小值、Q1、中位數、Q3、最大值）</li>
                            <li>快速比較多組數據的中心趨勢和離散程度</li>
                            <li>直觀識別異常值和極端情況</li>
                            <li>評估防禦方法的穩定性和可預測性</li>
                            <li>適合大量數據的統計分析和決策支援</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<!-- 引用外部 Plotly.js 圖表程式碼 -->
<script src="{{ url_for('static', filename='js/charts.js') }}"></script>
{% endblock %}