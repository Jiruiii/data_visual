{% extends "base.html" %} {% block content %}
<div class="container">
  <div class="content-container">
    <div class="page-header">
      <h1><i class="fas fa-project-diagram"></i> 進階視覺化分析</h1>
      <p>使用 Heatmap 和 Treemap 進行深度資料探索與高風險組合識別</p>
    </div>

    <!-- Heatmap Section -->
    <div class="chart-container">
      <h3 class="chart-title">
        <i class="fas fa-fire"></i> 熱力圖：各產業 × 攻擊類型的平均財務損失
      </h3>

      <!-- 簡短圖表說明 -->
      <div class="alert alert-info mb-3">
        <i class="fas fa-info-circle"></i>
        <strong>圖表說明：</strong>此熱力圖展示不同產業面對各種攻擊類型時的平均財務損失。
        <strong>顏色越深</strong>代表損失越高，可快速識別需要優先防護的「產業-攻擊」組合。
      </div>

      <!-- Statistics Cards -->
      <div id="heatmap-stats" class="mb-3" style="display: none"></div>

      <div id="heatmap-chart" class="loading">
        <div class="spinner-border" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>

      <div class="mt-4">
        <h6><i class="fas fa-eye"></i> 從熱力圖可以觀察到：</h6>
        <ul>
          <li>
            <strong>高風險組合：</strong>
            紅色區域代表「產業-攻擊」的高損失組合，例如金融業 ×
            勒索軟體可能造成巨額損失
          </li>
          <li>
            <strong>產業脆弱性：</strong>
            某一行（產業）如果多數格子偏紅，表示該產業容易受到多種攻擊的高損失影響
          </li>
          <li>
            <strong>攻擊威脅性：</strong>
            某一列（攻擊類型）如果多數格子偏紅，表示該攻擊對多個產業都造成嚴重財務損失
          </li>
          <li>
            <strong>防禦優先級：</strong>
            最紅的區域應該是資安投資的首要目標
          </li>
          <li>
            <strong>空白區域：</strong>
            某些產業-攻擊組合可能沒有資料（顯示為淺色或空白），代表該攻擊不常針對該產業
          </li>
        </ul>

        <!-- 什麼是熱力圖 -->
        <div class="card border-primary mb-3">
          <div class="card-header bg-primary text-white">
            <h6 class="mb-0"><i class="fas fa-question-circle"></i> 什麼是熱力圖 (Heatmap)？</h6>
          </div>
          <div class="card-body">
            <ul class="mb-0">
              <li>使用<strong>顏色深淺</strong>來表示數值大小的視覺化方式</li>
              <li>非常適合展示<strong>二維矩陣資料</strong>（如：產業 × 攻擊類型）</li>
              <li>本圖呈現：橫軸 = 攻擊類型，縱軸 = 目標產業</li>
              <li>每個格子的顏色代表該組合的平均財務損失</li>
              <li>紅色越深 = 損失越高，綠色 = 損失較低</li>
            </ul>
          </div>
        </div>

        <!-- 為什麼選擇熱力圖 -->
        <div class="card border-success">
          <div class="card-header bg-success text-white">
            <h6 class="mb-0"><i class="fas fa-lightbulb"></i> 為什麼選擇熱力圖？</h6>
          </div>
          <div class="card-body">
            <ul class="mb-0">
              <li><strong>快速識別極值：</strong>一眼看出最高/最低損失的組合</li>
              <li><strong>模式發現：</strong>輕鬆發現哪些產業或攻擊類型整體風險較高</li>
              <li><strong>對比直觀：</strong>顏色對比比數字更容易理解</li>
              <li><strong>空間效率：</strong>在有限空間內展示大量資料點</li>
              <li><strong>決策支援：</strong>幫助資安團隊決定資源投入的優先順序</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- Treemap Section -->
    <div class="chart-container mt-5">
      <h3 class="chart-title">
        <i class="fas fa-th"></i> Treemap：目標產業與攻擊類型分布
      </h3>

      <!-- 簡短圖表說明 -->
      <div class="alert alert-info mb-3">
        <i class="fas fa-info-circle"></i>
        <strong>圖表說明：</strong>此 Treemap 以<strong>矩形大小</strong>表示各產業遭受攻擊的次數。
        矩形越大代表該產業被攻擊越頻繁，內部子區塊顯示不同攻擊類型的分布比例。
      </div>

      <div id="treemap-chart" class="loading">
        <div class="spinner-border" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>

      <div class="mt-4">
        <h6><i class="fas fa-eye"></i> 從 Treemap 可以觀察到：</h6>
        <ul>
          <li>
            <strong>高風險產業：</strong>
            面積最大的矩形代表被攻擊最多的產業，例如：
            <ul>
              <li>金融業 - 高價值目標，常遭受勒索軟體攻擊</li>
              <li>醫療業 - 敏感資料多，是資料外洩的主要目標</li>
              <li>政府部門 - 關鍵基礎設施，是 APT 攻擊重點</li>
              <li>科技產業 - 技術機密的主要目標</li>
            </ul>
          </li>
          <li>
            <strong>攻擊類型分布：</strong>
            點進每個產業可看到不同顏色的子區塊，代表針對該產業的不同攻擊類型
          </li>
          <li>
            <strong>空間利用：</strong>
            相比長條圖或表格，Treemap 能在有限空間內展示更多層級的資訊
          </li>
          <li>
            <strong>視覺對比：</strong>
            矩形大小的對比非常直觀，一眼就能看出哪些產業需要重點防護
          </li>
        </ul>

        <!-- 什麼是 Treemap -->
        <div class="card border-primary mb-3">
          <div class="card-header bg-primary text-white">
            <h6 class="mb-0"><i class="fas fa-question-circle"></i> 什麼是 Treemap (樹狀圖)？</h6>
          </div>
          <div class="card-body">
            <ul class="mb-0">
              <li>使用<strong>巢狀矩形</strong>來展示層級資料的視覺化方式</li>
              <li>矩形的<strong>大小</strong>代表數值的大小（如：攻擊次數）</li>
              <li>非常適合展現<strong>部分與整體的關係</strong>和<strong>階層結構</strong></li>
              <li>本圖呈現：外層大矩形 = 產業，內層小矩形 = 攻擊類型</li>
              <li>一眼看出：(1) 哪個產業被攻擊最多 (2) 該產業遭受哪些攻擊</li>
            </ul>
          </div>
        </div>

        <!-- 為什麼選擇 Treemap -->
        <div class="card border-success">
          <div class="card-header bg-success text-white">
            <h6 class="mb-0"><i class="fas fa-lightbulb"></i> 為什麼選擇 Treemap？</h6>
          </div>
          <div class="card-body">
            <ul class="mb-0">
              <li><strong>一圖多訊：</strong>同時展示產業攻擊量、攻擊類型分布、佔比關係</li>
              <li><strong>層級清晰：</strong>巢狀結構讓「整體-部分」關係一目了然</li>
              <li><strong>比例直觀：</strong>面積大小直接反映數量多寡</li>
              <li><strong>互動探索：</strong>可點擊深入查看各產業的攻擊細節</li>
              <li><strong>視覺吸睛：</strong>適合用於簡報，快速抓住觀眾注意力</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %} 

{% block extra_js %}
<!-- 引用外部 Plotly.js 圖表程式碼 -->
<script src="{{ url_for('static', filename='js/advanced.js') }}"></script>
{% endblock %}