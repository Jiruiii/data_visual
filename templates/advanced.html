{% extends "base.html" %} {% block content %}
<div class="container">
  <div class="content-container">
    <div class="page-header">
      <h1><i class="fas fa-project-diagram"></i> 進階視覺化分析</h1>
      <p>使用 Sankey 圖和 Treemap 進行深度資料探索</p>
    </div>

    <div class="chart-container">
      <h3 class="chart-title">
        <i class="fas fa-fire"></i> 熱力圖：各產業 × 攻擊類型的平均財務損失
      </h3>

      <div class="alert alert-primary">
        <h6><i class="fas fa-info-circle"></i> 什麼是熱力圖？</h6>
        <p>
          熱力圖使用<strong>顏色深淺</strong>來表示數值大小，非常適合展示<strong>二維矩陣資料</strong>。
          紅色越深表示財務損失越高，綠色表示損失較低。
        </p>
        <p class="mb-0">
          <strong>本圖呈現：</strong
          >橫軸是攻擊類型，縱軸是目標產業，每個格子的顏色代表該組合的平均財務損失。
          可以快速識別「哪些產業面對哪些攻擊最脆弱」。
        </p>
      </div>

      <!-- Statistics Cards -->
      <div id="heatmap-stats" class="mb-3" style="display: none"></div>

      <div id="heatmap-chart" class="loading">
        <div class="spinner-border" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>

      <div class="mt-4">
        <h6><i class="fas fa-eye"></i> 從熱力圖可以觀察到：</h6>
        <ul>
          <li>
            <strong>高風險組合：</strong>
            紅色區域代表「產業-攻擊」的高損失組合，例如金融業 ×
            勒索軟體可能造成巨額損失
          </li>
          <li>
            <strong>產業脆弱性：</strong>
            某一行（產業）如果多數格子偏紅，表示該產業容易受到多種攻擊的高損失影響
          </li>
          <li>
            <strong>攻擊威脅性：</strong>
            某一列（攻擊類型）如果多數格子偏紅，表示該攻擊對多個產業都造成嚴重財務損失
          </li>
          <li>
            <strong>防禦優先級：</strong>
            最紅的區域應該是資安投資的首要目標
          </li>
          <li>
            <strong>空白區域：</strong>
            某些產業-攻擊組合可能沒有資料（顯示為淺色或空白），代表該攻擊不常針對該產業
          </li>
        </ul>

        <div class="alert alert-success mt-3">
          <h6><i class="fas fa-lightbulb"></i> 為什麼選擇熱力圖？</h6>
          <p class="mb-0">
            相比桑基圖的流向展示，熱力圖更適合<strong>量化比較</strong>！
            它可以同時展示所有「產業 × 攻擊」組合的損失金額，
            讓決策者快速找出需要重點防禦的領域。
            而且顏色編碼比數字更直觀，特別適合在管理層簡報中使用。
          </p>
        </div>
      </div>
    </div>

    <!-- Treemap -->
    <div class="chart-container">
      <h3 class="chart-title">
        <i class="fas fa-th"></i> Treemap：目標產業與攻擊類型分布
      </h3>
      <div class="alert alert-primary">
        <h6><i class="fas fa-info-circle"></i> 什麼是 Treemap (樹狀圖)？</h6>
        <p>
          Treemap
          使用<strong>巢狀矩形</strong>來展示層級資料，矩形的大小代表數值的大小。
          非常適合展現<strong>部分與整體的關係</strong>和<strong>階層結構</strong>。
        </p>
        <p class="mb-0">
          <strong>本圖呈現：</strong
          >每個產業遭受的攻擊次數，以及該產業下不同攻擊類型的分布。 大矩形 =
          該產業被攻擊次數多，內部小矩形 = 不同攻擊類型的佔比。
        </p>
      </div>
      <div id="treemap-chart" class="loading">
        <div class="spinner-border" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
      <div class="mt-4">
        <h6><i class="fas fa-eye"></i> 從 Treemap 可以觀察到：</h6>
        <ul>
          <li>
            <strong>高風險產業：</strong>
            面積最大的矩形代表被攻擊最多的產業，例如：
            <ul>
              <li>金融業 - 高價值目標，常遭受勒索軟體攻擊</li>
              <li>醫療業 - 敏感資料多，是資料外洩的主要目標</li>
              <li>政府部門 - 關鍵基礎設施，是 APT 攻擊重點</li>
              <li>科技產業 - 技術機密的主要目標</li>
            </ul>
          </li>
          <li>
            <strong>攻擊類型分布：</strong>
            點進每個產業可看到不同顏色的子區塊，代表針對該產業的不同攻擊類型
          </li>
          <li>
            <strong>空間利用：</strong>
            相比長條圖或表格，Treemap 能在有限空間內展示更多層級的資訊
          </li>
          <li>
            <strong>視覺對比：</strong>
            矩形大小的對比非常直觀，一眼就能看出哪些產業需要重點防護
          </li>
        </ul>

        <div class="alert alert-success mt-3">
          <h6><i class="fas fa-lightbulb"></i> 為什麼選擇 Treemap？</h6>
          <p class="mb-0">
            Treemap 最大的優勢是<strong>一圖多訊</strong>（One view, multiple
            insights）！ 它同時展示：(1) 哪個產業被攻擊最多 (2)
            該產業遭受哪些類型攻擊 (3) 各攻擊類型的佔比。
            而且視覺效果超級吸睛，很適合在簡報中使用，讓觀眾快速抓住重點。
          </p>
        </div>
      </div>
    </div>

    <!-- Comparison: Basic vs Advanced Charts -->
    <div class="mt-4">
      <h3><i class="fas fa-balance-scale"></i> 基本圖表 vs 進階圖表</h3>
      <div class="row">
        <div class="col-md-6 mb-3">
          <div class="card border-0 shadow h-100">
            <div class="card-body">
              <h5 class="card-title text-center">
                <i
                  class="fas fa-chart-bar"
                  style="color: var(--primary-color)"
                ></i>
                基本圖表
              </h5>
              <ul>
                <li><strong>優點：</strong>直觀易懂、製作簡單、通用性高</li>
                <li><strong>適用：</strong>單一維度或簡單比較</li>
                <li>
                  <strong>例如：</strong
                  >長條圖比較數值、圓餅圖顯示佔比、折線圖呈現趨勢
                </li>
                <li><strong>限制：</strong>難以同時展現多個維度的關聯</li>
              </ul>
            </div>
          </div>
        </div>
        <div class="col-md-6 mb-3">
          <div
            class="card border-0 shadow h-100"
            style="border-left: 5px solid var(--accent-color) !important"
          >
            <div class="card-body">
              <h5 class="card-title text-center">
                <i
                  class="fas fa-project-diagram"
                  style="color: var(--accent-color)"
                ></i>
                進階圖表
              </h5>
              <ul>
                <li>
                  <strong>優點：</strong>多維度關聯、層級結構清晰、視覺衝擊力強
                </li>
                <li><strong>適用：</strong>複雜關係、流程追蹤、階層分析</li>
                <li>
                  <strong>例如：</strong>Sankey 圖追蹤流向、Treemap 展現層級
                </li>
                <li><strong>特色：</strong>提供更深層的資料洞察和故事性</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Insights Summary -->
    <div
      class="card border-0 shadow mt-4"
      style="
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
      "
    >
      <div class="card-body">
        <h4><i class="fas fa-star"></i> 進階視覺化的價值</h4>
        <p class="lead">
          Sankey 圖和 Treemap
          不只是「漂亮的圖表」，它們能揭露基本圖表看不到的<strong>深層模式</strong>：
        </p>
        <div class="row mt-3">
          <div class="col-md-6">
            <h6>💡 Sankey 圖揭露</h6>
            <ul>
              <li>攻擊者的作戰模式</li>
              <li>來源-手法-目標的完整鏈條</li>
              <li>資源集中的關鍵路徑</li>
            </ul>
          </div>
          <div class="col-md-6">
            <h6>💡 Treemap 揭露</h6>
            <ul>
              <li>防禦資源的優先順序</li>
              <li>產業與攻擊類型的相關性</li>
              <li>整體威脅的結構分布</li>
            </ul>
          </div>
        </div>
        <p class="mt-3 mb-0">
          <i class="fas fa-quote-left"></i>
          <em>
            資料視覺化的最終目的不是「畫圖」，而是「講故事」和「發現洞察」。
            進階圖表讓我們能夠用更有說服力的方式，傳達複雜的資料關係。
          </em>
          <i class="fas fa-quote-right"></i>
        </p>
      </div>
    </div>
  </div>
</div>
{% endblock %} {% block extra_js %}
<!-- 引用外部 Plotly.js 圖表程式碼 -->
<script src="{{ url_for('static', filename='js/advanced.js') }}"></script>
{% endblock %}
